{% extends 'hostel/base.html' %}
{% block title %}Issues{% endblock %}
{% block content %}
<h2>Issues</h2>
<form method="get" class="mb-3">
  <select name="status" class="form-select w-auto d-inline-block">
    <option value="">All Status</option>
    <option value="open" {% if request.GET.status == 'open' %}selected{% endif %}>Open</option>
    <option value="in_progress" {% if request.GET.status == 'in_progress' %}selected{% endif %}>In Progress</option>
    <option value="resolved" {% if request.GET.status == 'resolved' %}selected{% endif %}>Resolved</option>
  </select>
  <select name="priority" class="form-select w-auto d-inline-block">
    <option value="">All Priorities</option>
    <option value="low">Low</option>
    <option value="medium">Medium</option>
    <option value="urgent">Urgent</option>
  </select>
  <button class="btn btn-dark btn-sm">Filter</button>
  <a href="{% url 'issue_create' %}" class="btn btn-success float-end">+ Report Issue</a>
</form>

<table class="table table-bordered table-hover">
  <thead class="table-dark">
    <tr>
      <th>Title</th>
      <th>Room</th>
      <th>Status</th>
      <th>Priority</th>
      <th>Reported By</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {% for i in issues %}
    <tr>
      <td>{{ i.title }}</td>
      <td>{{ i.room.room_number }}</td>
      <td>{{ i.status }}</td>
      <td>{{ i.priority }}</td>
      <td>{{ i.reported_by.username }}</td>
      <td><a href="{% url 'issue_detail' i.id %}" class="btn btn-sm btn-outline-dark">View</a></td>
    </tr>
    {% empty %}
    <tr><td colspan="6" class="text-center">No issues found.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
